<extend name="Public:base" />

<block name="main-page">
    <div class="main-page">
        <!--grids-->
        <div class="grids">
            <div class="progressbar-heading grids-heading">
                <h2>计算模型（{$today}）</h2>
            </div>
            <div class="panel panel-widget">
                <div class="tables">
                    <div style="margin-bottom: 10px;">
                        <form id="type_form" method="get">
                            <div style="float:left;"><h4>缩量</h4></div>
                            <div style="float:left;margin:0px 50px;">
                                <label><input name="date" type="radio" value="latest" <if condition="(!isset($_GET['date'])) OR ($Think.get.date eq 'latest')">checked="checked"</if>/>今日/近日</label>
                                <label><input name="date" type="radio" value="all" <if condition="$Think.get.date eq 'all'">checked="checked"</if>/>全部</label>
                                <input type="submit" id="confirm" value="   确 定   " style="margin: 0px 5px;">
                            </div>
                            <div style="float:right"></div>
                            <div style="clear: both;"></div>
                        </form>
                    </div>
                    <table class="table table-bordered" style="font-size: 14px;">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>Date&nbsp;</span><span><if condition="$Think.get.sort eq 'Date'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th>Code</th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>P_change&nbsp;</span><span><if condition="$Think.get.sort eq 'P_change'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>P2max&nbsp;</span><span><if condition="$Think.get.sort eq 'P2max'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max&nbsp;</span><span><if condition="!isset($_GET['sort'])">↑<elseif condition="$Think.get.sort eq 'Vol_shrink_max'"/><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max5d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2max5d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max10d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2max10d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max20d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2max20d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max60d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2max60d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2max120d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2max120d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2ma5d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2ma5d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2ma10d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2ma10d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2ma20d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2ma20d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2ma60d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2ma60d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                                <th style="cursor:pointer;color:#67D3E0;"><span>V2ma120d&nbsp;</span><span><if condition="$Think.get.sort eq 'V2ma120d'"><if condition="$Think.get.desc eq 1">↓<else />↑</if></if></span></th>
                            </tr>
                        </thead>
                        <tbody>
                        <foreach name="list" item="vo">
                            <tr>
                                <td><a href="{:U('Detail/index',array('code'=>$vo['code']))}">{$vo.name}</a></td>
                                <td>{$vo.date}</td>
                                <td><a href="{:U('Detail/index',array('code'=>$vo['code']))}">{$vo.code}</a></td>
                                <td>{$vo.p_change}</td>
                                <td>{$vo.p2max}%</td>
                                <td>{$vo.v2max}</td>
                                <td>{$vo.v2max5d}</td>
                                <td>{$vo.v2max10d}</td>
                                <td>{$vo.v2max20d}</td>
                                <td>{$vo.v2max60d}</td>
                                <td>{$vo.v2max120d}</td>
                                <td>{$vo.v2ma5d}</td>
                                <td>{$vo.v2ma10d}</td>
                                <td>{$vo.v2ma20d}</td>
                                <td>{$vo.v2ma60d}</td>
                                <td>{$vo.v2ma120d}</td>
                            </tr>
                        </foreach>
                        </tbody>
                    </table>
                    <div style="float:left;"></div><div class="manu" style="float:right;">{$page}</div><div style="clear: both;"></div>
                    <script type="text/javascript">
                        $(function() {
                            $('#confirm').click(function(e) {
                                var date = $("input[name='date']:checked").val();
                                window.location.href = '__ACTION__?date=' + date;

                                return e.preventDefault();
                            });

                            $('.tables th[style]').click(function() {
                                var date = $("input[name='date']:checked").val();
                                var desc = $(this).children(':eq(1)').text();
                                var sort = $.trim($(this).children(':eq(0)').text());

                                var params = 'volumeShrink?sort=' + sort;
                                if(desc == '' || sort == '↓') {
                                    params += '&desc=0';
                                } else {
                                    params += '&desc=1';
                                }

                                params += '&date=' + date;

                                window.location.href = "{:U('" + params + "')}";
                            });
                        });
                    </script>
                </div>
            </div>
        </div>
        <!--//grids-->

    </div>
</block>